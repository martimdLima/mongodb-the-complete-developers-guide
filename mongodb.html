<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-10-10 sáb 17:44 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MongoDB - The Complete Guide</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Martim Lima" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.cacheClassElem = elem.className;
         elem.cacheClassTarget = target.className;
         target.className = "code-highlighted";
         elem.className   = "code-highlighted";
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(elem.cacheClassElem)
         elem.className = elem.cacheClassElem;
       if(elem.cacheClassTarget)
         target.className = elem.cacheClassTarget;
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">MongoDB - The Complete Guide</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org0285210">Basics &amp; Crud Operations&#xa0;&#xa0;&#xa0;<span class="tag"><span class="basics">basics</span></span></a>
<ul>
<li><a href="#org6eee4c7">Check databases / Create a Database</a></li>
<li><a href="#org07e95c0">Create a document</a></li>
<li><a href="#org58009fb">Find documents</a></li>
<li><a href="#org1b16433">Update Documents</a></li>
<li><a href="#org1d25b90">Replace Documents</a></li>
<li><a href="#orgdc4b18a">Delete Documents</a></li>
<li><a href="#org11ff5b1">Projections</a></li>
<li><a href="#orgf2d5b26">Working with nested documents</a></li>
<li><a href="#orgd7567d9">Working with arrays</a></li>
<li><a href="#org3068702">Acessing structured data</a></li>
</ul>
</li>
<li><a href="#org4bb38a9">Schemas &amp; Relations - How to Structure Documents&#xa0;&#xa0;&#xa0;<span class="tag"><span class="schemasandrelations">schemasandrelations</span></span></a>
<ul>
<li><a href="#orgd4dba08">Structuring documents</a></li>
<li><a href="#org536bb50">Data Types</a></li>
<li><a href="#org910feb5">Database Stats</a></li>
<li><a href="#orgbc2207f">Check the type of an value</a></li>
<li><a href="#orgf235c92">Insert a document with a number with a default 64 bit value</a></li>
<li><a href="#org3e8c88c">Insert a product with a number with an int32 value instead of 64 bit</a></li>
<li><a href="#orga91b73c">Important data type limits</a></li>
</ul>
</li>
<li><a href="#orgc886758">Exploring the Shell and the Server</a></li>
<li><a href="#org38938a9">Create Operations&#xa0;&#xa0;&#xa0;<span class="tag"><span class="createOperations">createOperations</span></span></a>
<ul>
<li><a href="#org2d775ac">insert() Methods</a></li>
<li><a href="#org54bc79e">writeConcern</a></li>
<li><a href="#org02a794c">Atomicity</a></li>
<li><a href="#orgfc4c4af">Multi-Document Transactions</a></li>
<li><a href="#orgf917153">Importing Data</a></li>
</ul>
</li>
<li><a href="#org32b9ca8">Read Operations&#xa0;&#xa0;&#xa0;<span class="tag"><span class="readOperations">readOperations</span></span></a></li>
<li><a href="#org3ec1d49">Update Operations&#xa0;&#xa0;&#xa0;<span class="tag"><span class="updateOperations">updateOperations</span></span></a></li>
<li><a href="#orgbeb43c5">Delete Operations&#xa0;&#xa0;&#xa0;<span class="tag"><span class="deleteOperations">deleteOperations</span></span></a></li>
<li><a href="#org37000d3">Indexes&#xa0;&#xa0;&#xa0;<span class="tag"><span class="indexes">indexes</span></span></a></li>
<li><a href="#orgd7bf891">GeoSpatial Data&#xa0;&#xa0;&#xa0;<span class="tag"><span class="geospatialData">geospatialData</span></span></a></li>
<li><a href="#orgdf99727">Numeric Data&#xa0;&#xa0;&#xa0;<span class="tag"><span class="numericData">numericData</span></span></a></li>
<li><a href="#org0629b0d">Aggregation Framework&#xa0;&#xa0;&#xa0;<span class="tag"><span class="aggregationFramework">aggregationFramework</span></span></a></li>
<li><a href="#orgea5f2d8">MongoDB &amp; Securtiy&#xa0;&#xa0;&#xa0;<span class="tag"><span class="security">security</span></span></a></li>
<li><a href="#org28b132f">Performance, Fault Tolerancy &amp; Deployment&#xa0;&#xa0;&#xa0;<span class="tag"><span class="performanceFaultTolerancyAndDeployment">performanceFaultTolerancyAndDeployment</span></span></a></li>
<li><a href="#orgfb42acc">Transactions&#xa0;&#xa0;&#xa0;<span class="tag"><span class="transactions">transactions</span></span></a></li>
<li><a href="#org6068030">Introduction to Stitch&#xa0;&#xa0;&#xa0;<span class="tag"><span class="stitch">stitch</span></span></a></li>
<li><a href="#org62d44a4">Useful Resources and Links&#xa0;&#xa0;&#xa0;<span class="tag"><span class="resourcesAndLinks">resourcesAndLinks</span></span></a></li>
</ul>
</div>
</div>
<div class="right">
  <a href="https://github.com/fniessen/org-html-themes/blob/master/demo/example.org" class="fa fa-github"> Edit on GitHub</a>
</div>

<hr />

<div id="outline-container-org0285210" class="outline-2">
<h2 id="org0285210">Basics &amp; Crud Operations&#xa0;&#xa0;&#xa0;<span class="tag"><span class="basics">basics</span></span></h2>
<div class="outline-text-2" id="text-org0285210">
<p>
An overview of the basics of mongodb and crud operations
</p>
</div>

<div id="outline-container-org6eee4c7" class="outline-3">
<h3 id="org6eee4c7">Check databases / Create a Database</h3>
<div class="outline-text-3" id="text-org6eee4c7">
<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #405A61;">// </span><span style="color: #405A61;">Show all databases</span>
&gt;  show dbs

<span style="color: #405A61;">// </span><span style="color: #405A61;">Use the specified database</span>
&gt; use dbname
</pre>
</div>
</div>
</div>


<div id="outline-container-org07e95c0" class="outline-3">
<h3 id="org07e95c0">Create a document</h3>
<div class="outline-text-3" id="text-org07e95c0">
<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #405A61;">// </span><span style="color: #405A61;">Create a Document</span>
&gt; db.dbname.insertOne(
    {name: <span style="color: #2aa198;">"product1"</span>, price: <span style="color: #d33682; font-weight: bold;">12.99</span>}
)

<span style="color: #405A61;">// </span><span style="color: #405A61;">Create a document with an embbeded document</span>
&gt; db.dbname.insertOne(
    {
        key1: <span style="color: #2aa198;">"dummy"</span>,
        key2: <span style="color: #d33682; font-weight: bold;">12.99</span>,
        key3: <span style="color: #2aa198;">"A dummy product"</span>,
        key4: {
            key4subkey1: <span style="color: #2aa198;">"key4subval1"</span>,
            key4subkey1: key4subkey2
            }
    }
)

<span style="color: #405A61;">// </span><span style="color: #405A61;">Create various documents in a collection</span>
&gt; db.dbname.insertMany(
    [
        {
            key1: <span style="color: #2aa198;">"value1"</span>,
            key2: <span style="color: #2aa198;">"value2"</span>,
            key3: <span style="color: #2aa198;">"value3"</span>,
            key4: <span style="color: #2aa198;">"value4"</span>,
        },
        {
            key1: <span style="color: #2aa198;">"value1"</span>,
            key2: <span style="color: #2aa198;">"value2"</span>,
            key3: <span style="color: #2aa198;">"value3"</span>,
            key4: <span style="color: #2aa198;">"value4"</span>,
        }
    ]
)

</pre>
</div>
</div>
</div>

<div id="outline-container-org58009fb" class="outline-3">
<h3 id="org58009fb">Find documents</h3>
<div class="outline-text-3" id="text-org58009fb">
<p>
find() doesn&rsquo;t return an array of all the documents in a collection, but a cursor pretty() can only be applied when the result of the operation applied returns a cursor while find() returns a cursor, findOne() returns a document, so it can only be applied to find().
</p>


<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #405A61;">// </span><span style="color: #405A61;">Find all documents in a collection</span>
&gt; db.dbname.find()

<span style="color: #405A61;">// </span><span style="color: #405A61;">Find all documents in a collection in a prettified form</span>
&gt; db.dbname.find().pretty()

<span style="color: #405A61;">// </span><span style="color: #405A61;">Find all documents in a collection and convert it to array (This operation returns every document in a collection, despite the size)</span>
&gt; db.dbname.find().toArray()

<span style="color: #405A61;">// </span><span style="color: #405A61;">Find all documents in a collection and apply certain operations on each one</span>
&gt; db.dbname.find().forEach((colData) =&gt; {printjson(colData)})

<span style="color: #405A61;">// </span><span style="color: #405A61;">Find all documents in a collection that match a specific key/value</span>
&gt; db.dbname.find({key: value})

<span style="color: #405A61;">// </span><span style="color: #405A61;">Find all documents in a collection that are greater than the specificied key/value</span>
&gt; db.dbname.find({key: {$gt: value}})

<span style="color: #405A61;">// </span><span style="color: #405A61;">Find one document in a collection that match a specific key/value</span>
&gt; db.dbname.findOne({key: value})

<span style="color: #405A61;">// </span><span style="color: #405A61;">Find all documents in a collection that is greater than the specific key/value</span>
&gt; db.dbname.findOne({key: {$gt: value}})
</pre>
</div>
</div>
</div>


<div id="outline-container-org1b16433" class="outline-3">
<h3 id="org1b16433">Update Documents</h3>
<div class="outline-text-3" id="text-org1b16433">
<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #405A61;">// </span><span style="color: #405A61;">Update one document</span>
&gt; db.dbname.updateOne({key: <span style="color: #2aa198;">"value"</span>}, {$set: {key: <span style="color: #2aa198;">"updtValue"</span>}})

<span style="color: #405A61;">// </span><span style="color: #405A61;">Update many documents</span>
&gt; db.dbname.updateMany({}, {$set: {key: <span style="color: #2aa198;">"updtValue"</span>}})

<span style="color: #405A61;">// </span><span style="color: #405A61;">Update a document replacing all key/value pairs</span>
&gt; db.dbname.update({key: <span style="color: #2aa198;">"value"</span>}, {{key: <span style="color: #2aa198;">"updtValue"</span>}})i
</pre>
</div>
</div>
</div>


<div id="outline-container-org1d25b90" class="outline-3">
<h3 id="org1d25b90">Replace Documents</h3>
<div class="outline-text-3" id="text-org1d25b90">
<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #405A61;">// </span><span style="color: #405A61;">Replace a document</span>
&gt; db.dbname.replaceOne(  {
    key1: <span style="color: #2aa198;">"value1"</span>,
    key2: <span style="color: #2aa198;">"value2"</span>,
    key3: <span style="color: #2aa198;">"value3"</span>,
    key4: <span style="color: #2aa198;">"value4"</span>,
  })
</pre>
</div>
</div>
</div>


<div id="outline-container-orgdc4b18a" class="outline-3">
<h3 id="orgdc4b18a">Delete Documents</h3>
<div class="outline-text-3" id="text-orgdc4b18a">
<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #405A61;">// </span><span style="color: #405A61;">Delete one document</span>
&gt; db.dbname.deleteOne({key: <span style="color: #2aa198;">"value"</span>})

<span style="color: #405A61;">// </span><span style="color: #405A61;">Delete all documents that have common key/pair values</span>
&gt; db.dbname.deleteMany({commonKey: <span style="color: #2aa198;">"commonValue"</span>})

<span style="color: #405A61;">// </span><span style="color: #405A61;">Delete many documents</span>
&gt; db.dbname.deleteMany({})
</pre>
</div>
</div>
</div>


<div id="outline-container-org11ff5b1" class="outline-3">
<h3 id="org11ff5b1">Projections</h3>
<div class="outline-text-3" id="text-org11ff5b1">
<pre class="example">
// Using projections to return all the documents with the choosen properties
&gt; db.dbname.find({}, {key: value}).pretty()

// Using projections to return all the documents in the collection with the choosen properties, excluding some
&gt; db.dbname.find({}, {key: value, _key: value}).pretty()
</pre>
</div>
</div>


<div id="outline-container-orgf2d5b26" class="outline-3">
<h3 id="orgf2d5b26">Working with nested documents</h3>
<div class="outline-text-3" id="text-orgf2d5b26">
<pre class="example">
// Update a document with a nested document
&gt; db.dbname.updateMany({}, {$set: {key: {nestedKey1: "nestedValue1", nestedKey2: "nestedValue2"}}})

// Update a document with a nested document
&gt; db.dbname.updateMany({}, {$set: {key: {nKey1: "nVal1", nKey2: "nVal2", nK3: {nk3a: "nk3aVal"}}}})
</pre>
</div>
</div>


<div id="outline-container-orgd7567d9" class="outline-3">
<h3 id="orgd7567d9">Working with arrays</h3>
<div class="outline-text-3" id="text-orgd7567d9">
<pre class="example">
&gt; db.dbname.updateOne({key: "val"}, {$set: {newKey: ["val1", "val2"]}})
</pre>
</div>
</div>


<div id="outline-container-org3068702" class="outline-3">
<h3 id="org3068702">Acessing structured data</h3>
<div class="outline-text-3" id="text-org3068702">
<pre class="example">
// Acessing a specific field of a document
 &gt; db.dbname.findOne({key: "val"}).key2

// Searching for documents with a specific field
 &gt; db.dbname.find({key: "value"}).pretty()

// Searching for documents that have a field with a specific subfield and value present
 &gt; db.dbname.find({"key.subkey": "subkeyVal"}).pretty()

// Searching for documents that have a field that has a subfield with a specific subfield and value present
 &gt; db.dbname.find({"key.subkey.subsubkey": "subsubkeyVal"}).pretty()
</pre>


<hr />
</div>
</div>
</div>

<div id="outline-container-org4bb38a9" class="outline-2">
<h2 id="org4bb38a9">Schemas &amp; Relations - How to Structure Documents&#xa0;&#xa0;&#xa0;<span class="tag"><span class="schemasandrelations">schemasandrelations</span></span></h2>
<div class="outline-text-2" id="text-org4bb38a9">
</div>

<div id="outline-container-orgd4dba08" class="outline-3">
<h3 id="orgd4dba08">Structuring documents</h3>
<div class="outline-text-3" id="text-orgd4dba08">
<div class="org-src-container">
<pre class="src src-javascript"> &gt; db.colname.insertMany([
  {
    name: <span style="color: #2aa198;">"Dummy1"</span>,
    price: <span style="color: #d33682; font-weight: bold;">12.99</span>,
    details: <span style="color: #d33682; font-weight: bold;">null</span>
  },
  {
    name: <span style="color: #2aa198;">"Dummy1"</span>,
    price: <span style="color: #d33682; font-weight: bold;">1234</span>,
    details: <span style="color: #d33682; font-weight: bold;">null</span>
  },
  {
    name: <span style="color: #2aa198;">"Dummy3"</span>,
    price: <span style="color: #d33682; font-weight: bold;">29.99</span>,
    details: {name: <span style="color: #2aa198;">"nestedDummy"</span>}
  }
])
</pre>
</div>
</div>
</div>

<div id="outline-container-org536bb50" class="outline-3">
<h3 id="org536bb50">Data Types</h3>
<div class="outline-text-3" id="text-org536bb50">
<div class="org-src-container">
<pre class="src src-javascript">&gt; db.colname.insertOne(
    {
      name: <span style="color: #2aa198;">"Dummy Corp Inc"</span>,
      isStartup: <span style="color: #d33682; font-weight: bold;">true</span>,
      employees: <span style="color: #d33682; font-weight: bold;">35</span>,
      funding: <span style="color: #d33682; font-weight: bold;">01234567899876543210</span>,
      details: {ceo: <span style="color: #2aa198;">"Dummy CEO"</span>},
      tags: [{title: <span style="color: #2aa198;">"test1"</span>}, {title: <span style="color: #2aa198;">"teste2"</span>}],
      foundingDate: <span style="color: #859900; font-weight: bold;">new</span> <span style="color: #b58900;">Date</span>(),
      insertedAt: <span style="color: #859900; font-weight: bold;">new</span> <span style="color: #b58900;">Timestamp</span>()
    }
)
</pre>
</div>
</div>
</div>

<div id="outline-container-org910feb5" class="outline-3">
<h3 id="org910feb5">Database Stats</h3>
<div class="outline-text-3" id="text-org910feb5">
<div class="org-src-container">
<pre class="src src-javascript">&gt; db.stats()
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbc2207f" class="outline-3">
<h3 id="orgbc2207f">Check the type of an value</h3>
<div class="outline-text-3" id="text-orgbc2207f">
<div class="org-src-container">
<pre class="src src-javascript">&gt; <span style="color: #859900; font-weight: bold;">typeof</span> db.colname.findOne().key
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf235c92" class="outline-3">
<h3 id="orgf235c92">Insert a document with a number with a default 64 bit value</h3>
<div class="outline-text-3" id="text-orgf235c92">
<div class="org-src-container">
<pre class="src src-javascript">&gt; db.colname.insertOne({key: <span style="color: #d33682; font-weight: bold;">1</span>})
</pre>
</div>
</div>
</div>

<div id="outline-container-org3e8c88c" class="outline-3">
<h3 id="org3e8c88c">Insert a product with a number with an int32 value instead of 64 bit</h3>
<div class="outline-text-3" id="text-org3e8c88c">
<div class="org-src-container">
<pre class="src src-javascript">&gt; db.colname.insertOne({key: NumberInt(<span style="color: #d33682; font-weight: bold;">1</span>)})
</pre>
</div>
</div>
</div>

<div id="outline-container-orga91b73c" class="outline-3">
<h3 id="orga91b73c">Important data type limits</h3>
<div class="outline-text-3" id="text-orga91b73c">
<ul class="org-ul">
<li><b>Normal integers (int32)</b> can hold a maximum value of +-2,147,483,647</li>

<li><b>Long integers (int64)</b> can hold a maximum value of +-9,223,372,036,854,775,807</li>

<li><b>Text</b> can be as long as you want - the limit is the 16mb restriction for the overall document</li>
</ul>

<p>
It&rsquo;s also important to understand the difference between int32 (NumberInt), int64 (NumberLong) and a normal number as you can enter it in the shell.
The same goes for a normal double and NumberDecimal.
</p>

<ul class="org-ul">
<li><b>NumberInt</b> creates a int32 value =&gt; NumberInt(55)</li>

<li><b>NumberLong</b> creates a int64 value =&gt; NumberLong(7489729384792)</li>
</ul>

<p>
If you just use a number (e.g. insertOne({a: 1}), this will get added as a normal double into the database.
The reason for this is that the shell is based on JS which only knows float/ double values and doesn&rsquo;t differ between integers and floats.
</p>

<ul class="org-ul">
<li><b>NumberDecimal</b> creates a high-precision double value =&gt; NumberDecimal(&ldquo;12.99&rdquo;) =&gt; This can be helpful for cases where you need (many) exact decimal places for calculations.</li>
</ul>

<p>
When not working with the shell but a MongoDB driver for your app programming language (e.g. PHP, .NET, Node.js, &#x2026;), you can use the driver to create these specific numbers.
</p>
</div>
</div>
</div>

<div id="outline-container-orgc886758" class="outline-2">
<h2 id="orgc886758">Exploring the Shell and the Server</h2>
</div>


<div id="outline-container-org38938a9" class="outline-2">
<h2 id="org38938a9">Create Operations&#xa0;&#xa0;&#xa0;<span class="tag"><span class="createOperations">createOperations</span></span></h2>
<div class="outline-text-2" id="text-org38938a9">
</div>

<div id="outline-container-org2d775ac" class="outline-3">
<h3 id="org2d775ac">insert() Methods</h3>
<div class="outline-text-3" id="text-org2d775ac">
<div class="org-src-container">
<pre class="src src-javascript">
</pre>
</div>
</div>


<div id="outline-container-orgd68de57" class="outline-4">
<h4 id="orgd68de57">unordered inserts</h4>
<div class="outline-text-4" id="text-orgd68de57">
<div class="org-src-container">
<pre class="src src-javascript">&gt; use contactData

&gt; db.persons.insertOne(
    {
        name: <span style="color: #2aa198;">"dummy"</span>,
        age: <span style="color: #d33682; font-weight: bold;">30</span>,
        hobbies: [<span style="color: #2aa198;">"Sports"</span>, <span style="color: #2aa198;">"Cooking"</span>]
    }
)

&gt; db.persons.insertOne(
    {
        name: <span style="color: #2aa198;">"dummy2"</span>,
        age: <span style="color: #d33682; font-weight: bold;">35</span>,
        hobbies: [<span style="color: #2aa198;">"Music"</span>, <span style="color: #2aa198;">"Cinema"</span>]
    }
)

&gt; db.persons.insertMany(
    [
        {
            name: <span style="color: #2aa198;">"dummy4"</span>,
            age: <span style="color: #d33682; font-weight: bold;">18</span>,
        },
                {
            name: <span style="color: #2aa198;">"dummy4"</span>,
            age: <span style="color: #d33682; font-weight: bold;">39</span>,
        },
    ]
)

&gt; db.persons.insert(
        {
            name: <span style="color: #2aa198;">"dummy5"</span>,
            age: <span style="color: #d33682; font-weight: bold;">18</span>,
        }
)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8296257" class="outline-4">
<h4 id="org8296257">ordered inserts</h4>
<div class="outline-text-4" id="text-org8296257">
<div class="org-src-container">
<pre class="src src-javascript">&gt; db.hobbies.insertMany(
    [
        {_id: <span style="color: #2aa198;">"sports"</span>, name: <span style="color: #2aa198;">"Sports"</span>},
        {_id: <span style="color: #2aa198;">"cooking"</span>, name: <span style="color: #2aa198;">"Cooking"</span>},
        {_id: <span style="color: #2aa198;">"cars"</span>, name: <span style="color: #2aa198;">"Cars"</span>},
    ]
)
</pre>
</div>

<p>
As it is the default behaviour of mongoDB, if we try to insert a value already added before, it will cancel the operation and output an error,
but since mongoDB by defaul treats each operation as standalone, it will insert the first value and cancel the others inserts when it gets to the second element.
</p>

<div class="org-src-container">
<pre class="src src-javascript">&gt; db.hobbies.insertMany(
    [
        {_id: <span style="color: #2aa198;">"astronomy"</span>, name: <span style="color: #2aa198;">"astronomy"</span>},
        {_id: <span style="color: #2aa198;">"cooking"</span>, name: <span style="color: #2aa198;">"Cooking"</span>},
        {_id: <span style="color: #2aa198;">"hiking"</span>, name: <span style="color: #2aa198;">"Hiking"</span>},
    ]
)
</pre>
</div>

<p>
To override this behaviour, we can pass a second argument to insertMany().
This second argument is a document used to configure this operation.
In this case, it will fail the first two values and insert the last two values.
</p>

<div class="org-src-container">
<pre class="src src-javascript">&gt; db.hobbies.insertMany(
    [
        {_id: <span style="color: #2aa198;">"sports"</span>, name: <span style="color: #2aa198;">"Sports"</span>},
        {_id: <span style="color: #2aa198;">"cooking"</span>, name: <span style="color: #2aa198;">"Cooking"</span>},
        {_id: <span style="color: #2aa198;">"astronomy"</span>, name: <span style="color: #2aa198;">"astronomy"</span>},
        {_id: <span style="color: #2aa198;">"hiking"</span>, name: <span style="color: #2aa198;">"Hiking"</span>},
    ],
    {ordered: <span style="color: #d33682; font-weight: bold;">false</span>}
)
</pre>
</div>
</div>
</div>
</div>



<div id="outline-container-org54bc79e" class="outline-3">
<h3 id="org54bc79e">writeConcern</h3>
<div class="outline-text-3" id="text-org54bc79e">
<p>
Write concern describes the level of acknowledgment requested from MongoDB for write operations to a standalone mongod or to replica sets or to sharded clusters.
In sharded clusters, mongos instances will pass the write concern on to the shards.
</p>

<p>
Starting in MongoDB 4.4, replica sets and sharded clusters support setting a global default write concern.
Operations which do not specify an explicit write concern inherit the global default write concern settings.
</p>

<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #405A61;">// </span><span style="color: #405A61;">w can be set to either 1 or 0, for server acknowledgment.</span>
&gt; db.persons.insertOne(
    {
        name: <span style="color: #2aa198;">"dummy6"</span>,
        age: <span style="color: #d33682; font-weight: bold;">38</span>,
    },
    {
        writeConcern: {w: <span style="color: #d33682; font-weight: bold;">1</span>}
    }
)

<span style="color: #405A61;">// </span><span style="color: #405A61;">j can be set to either true or false, to trigger jornaling of the entry</span>
&gt; db.persons.insertOne(
    {
        name: <span style="color: #2aa198;">"dummy7"</span>,
        age: <span style="color: #d33682; font-weight: bold;">38</span>,
    },
    {
        writeConcern: {w: <span style="color: #d33682; font-weight: bold;">1</span>, j: <span style="color: #d33682; font-weight: bold;">true</span>}
    }
)

<span style="color: #405A61;">// </span><span style="color: #405A61;">wtimeout can be set to the timeout of the write operation</span>
&gt; db.persons.insertOne(
    {
        name: <span style="color: #2aa198;">"dummy7"</span>,
        age: <span style="color: #d33682; font-weight: bold;">38</span>,
    },
    {
        writeConcern: {w: <span style="color: #d33682; font-weight: bold;">1</span>, j: <span style="color: #d33682; font-weight: bold;">true</span>, wtimeout: <span style="color: #d33682; font-weight: bold;">2000</span>}
    }
)
</pre>
</div>
</div>
</div>


<div id="outline-container-org02a794c" class="outline-3">
<h3 id="org02a794c">Atomicity</h3>
<div class="outline-text-3" id="text-org02a794c">
<p>
In MongoDB, a write operation is atomic on the level of a single document,
even if the operation modifies multiple embedded documents within a single document.
</p>
</div>
</div>

<div id="outline-container-orgfc4c4af" class="outline-3">
<h3 id="orgfc4c4af">Multi-Document Transactions</h3>
<div class="outline-text-3" id="text-orgfc4c4af">
<p>
When a single write operation (e.g. db.collection.updateMany()) modifies multiple documents,
the modification of each document is atomic, but the operation as a whole is not atomic.
</p>

<p>
When performing multi-document write operations, whether through a single write operation or multiple write operations, other operations may interleave.
</p>
</div>
</div>

<div id="outline-container-orgf917153" class="outline-3">
<h3 id="orgf917153">Importing Data</h3>
<div class="outline-text-3" id="text-orgf917153">
<p>
in the terminal shell
</p>

<div class="org-src-container">
<pre class="src src-shell">mongoimport tv-shows.json -d movieData -c movies --jsonArray --drop
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org32b9ca8" class="outline-2">
<h2 id="org32b9ca8">Read Operations&#xa0;&#xa0;&#xa0;<span class="tag"><span class="readOperations">readOperations</span></span></h2>
<div class="outline-text-2" id="text-org32b9ca8">
</div>
</div>


<div id="outline-container-org3ec1d49" class="outline-2">
<h2 id="org3ec1d49">Update Operations&#xa0;&#xa0;&#xa0;<span class="tag"><span class="updateOperations">updateOperations</span></span></h2>
<div class="outline-text-2" id="text-org3ec1d49">
</div>
</div>


<div id="outline-container-orgbeb43c5" class="outline-2">
<h2 id="orgbeb43c5">Delete Operations&#xa0;&#xa0;&#xa0;<span class="tag"><span class="deleteOperations">deleteOperations</span></span></h2>
<div class="outline-text-2" id="text-orgbeb43c5">
</div>
</div>



<div id="outline-container-org37000d3" class="outline-2">
<h2 id="org37000d3">Indexes&#xa0;&#xa0;&#xa0;<span class="tag"><span class="indexes">indexes</span></span></h2>
<div class="outline-text-2" id="text-org37000d3">
</div>
</div>


<div id="outline-container-orgd7bf891" class="outline-2">
<h2 id="orgd7bf891">GeoSpatial Data&#xa0;&#xa0;&#xa0;<span class="tag"><span class="geospatialData">geospatialData</span></span></h2>
<div class="outline-text-2" id="text-orgd7bf891">
</div>
</div>


<div id="outline-container-orgdf99727" class="outline-2">
<h2 id="orgdf99727">Numeric Data&#xa0;&#xa0;&#xa0;<span class="tag"><span class="numericData">numericData</span></span></h2>
<div class="outline-text-2" id="text-orgdf99727">
</div>
</div>


<div id="outline-container-org0629b0d" class="outline-2">
<h2 id="org0629b0d">Aggregation Framework&#xa0;&#xa0;&#xa0;<span class="tag"><span class="aggregationFramework">aggregationFramework</span></span></h2>
<div class="outline-text-2" id="text-org0629b0d">
</div>
</div>




<div id="outline-container-orgea5f2d8" class="outline-2">
<h2 id="orgea5f2d8">MongoDB &amp; Securtiy&#xa0;&#xa0;&#xa0;<span class="tag"><span class="security">security</span></span></h2>
<div class="outline-text-2" id="text-orgea5f2d8">
</div>
</div>


<div id="outline-container-org28b132f" class="outline-2">
<h2 id="org28b132f">Performance, Fault Tolerancy &amp; Deployment&#xa0;&#xa0;&#xa0;<span class="tag"><span class="performanceFaultTolerancyAndDeployment">performanceFaultTolerancyAndDeployment</span></span></h2>
<div class="outline-text-2" id="text-org28b132f">
</div>
</div>


<div id="outline-container-orgfb42acc" class="outline-2">
<h2 id="orgfb42acc">Transactions&#xa0;&#xa0;&#xa0;<span class="tag"><span class="transactions">transactions</span></span></h2>
<div class="outline-text-2" id="text-orgfb42acc">
</div>
</div>


<div id="outline-container-org6068030" class="outline-2">
<h2 id="org6068030">Introduction to Stitch&#xa0;&#xa0;&#xa0;<span class="tag"><span class="stitch">stitch</span></span></h2>
<div class="outline-text-2" id="text-org6068030">
</div>
</div>


<div id="outline-container-org62d44a4" class="outline-2">
<h2 id="org62d44a4">Useful Resources and Links&#xa0;&#xa0;&#xa0;<span class="tag"><span class="resourcesAndLinks">resourcesAndLinks</span></span></h2>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 10-10-2020</p>
<p class="author">Author: Martim Lima</p>
<p class="date">Created: 2020-10-10 sáb 17:44</p>
</div>
</body>
</html>
